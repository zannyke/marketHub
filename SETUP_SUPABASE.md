# Supabase Setup

To enable Database and Authentication features, you need to connect this app to Supabase.

1.  **Create a Supabase Project**: Go to [supabase.com](https://supabase.com) and create a new project.
2.  **Get Credentials**: Go to Project Settings -> API. Copy the `URL` and `anon` public key.
3.  **Create .env.local**: Create a file named `.env.local` in this folder (root).
4.  **Add Keys**: Paste the keys like this:

```bash
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJh...
```

5.  **Restart Server**: Run `npm run dev` again to load the new environment variables.

## Database Schema (SQL)

Run this SQL in your Supabase SQL Editor to set up the tables:

```sql
-- Create a table for Cart Items
create table cart_items (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  product_id text not null,
  quantity integer default 1,
  product_metadata jsonb,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- Enable RLS
alter table cart_items enable row level security;

-- Policies
create policy "Users can view their own cart"
  on cart_items for select
  using ( auth.uid() = user_id );

create policy "Users can insert into their own cart"
  on cart_items for insert
  with check ( auth.uid() = user_id );

create policy "Users can update their own cart"
  on cart_items for update
  using ( auth.uid() = user_id );

create policy "Users can delete from their own cart"
  on cart_items for delete
  using ( auth.uid() = user_id );
```
